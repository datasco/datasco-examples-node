/* (RU) ---------------------------------
 * Пример в котором мы достаем мета-данные
 * из HTML кода страницы 
 * (HTML мы получили с помощью gather)
---------------------------------------*/

const fetch = require('node-fetch')

void (async() => {
	const { API_KEY } = require('../../credentials.json')

	// 1. Send request to '/api/info' route
	const resp = await fetch("http://api.datasco.ru/api/extract", {
		method: 'post',
		headers: {
			'Authorization': API_KEY,
			'Accept': 'application/json',
		  	'Content-Type': 'application/json'
		},
		body: JSON.stringify({
			// "meta" - мета-данные
			"data": ["meta"],
			// Наш HTML код (proxymal.ru/contacts)
			"html": "<!doctype html>\n<html lang=\"ru\">\n<head>\n\t<!-- Meta -->\n\t<meta charset=\"utf-8\">\n\t<meta name=\"viewport\" content=\"width=device-width,initial-scale=1\">\n\t<title>Proxymal - Услуги</title>\n\t<meta name=\"description\" content=\"Proxymal (Проксимал) - компания с большим опытом разработки различных продуктов: веб-сервисов, лендингов, парсеров, ботов, ПО с использованием современного стека технологий и языков программирования.\">\n\t<meta name=\"keywords\" content=\"Разработка, Сайты, Кодинг, Программирование, Агенство, Команда разработки, Заказать сайт, Заказать разработку\">\n\t<meta name=\"author\" content=\"Proxymal\">\n\t<meta name=\"google-site-verification\" content=\"6FkPd36tJb46i4yR1KWOfmKF2SzLJYdQVyGcrSGunc8\">\n\t<link rel=\"shortcut icon\" href=\"/public/img/fav.ico\" type=\"image/x-icon\">\n\n\t<!-- Fonts-->\n\t<link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin>\n\t<link rel=\"preload\" as=\"style\" href=\"https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Roboto+Mono&display=swap\">\n\t<link rel=\"stylesheet\" media=\"print\" onload=\"this.onload=null;this.removeAttribute('media');\" href=\"https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Roboto+Mono&display=swap\">\n\t<noscript>\n\t\t<link rel=\"stylesheet\" href=\"https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Roboto+Mono&display=swap\">\n\t</noscript>\n\n\t<!-- Styles -->\n\t<link rel=\"stylesheet\" href=\"/public/css/main.min.css\">\n\t<link rel=\"stylesheet\" href=\"/public/vendor/uix/uix.min.css\">\n\n\t<!-- Yandex. Metrika -->\n\t<script type=\"text/javascript\" >\n\t\t(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};\n\t\tm[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})\n\t\t(window, document, \"script\", \"https://mc.yandex.ru/metrika/tag.js\", \"ym\");\n\t \n\t\tym(88005972, \"init\", {\n\t\t\t clickmap:true,\n\t\t\t trackLinks:true,\n\t\t\t accurateTrackBounce:true\n\t\t});\n\t</script>\n\t<noscript><div><img src=\"https://mc.yandex.ru/watch/88005972\" style=\"position:absolute; left:-9999px;\" alt=\"\" /></div></noscript>\n</head><body light>\n\t<nav class=\"fixed smooth bg-transparent\" light>\n\t<a href=\"/\" class=\"link-static logo\">\n\t\t<svg width=\"22\" height=\"22\" viewBox=\"0 0 195 199\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t<path d=\"M140.4 121.2V78H118.8V186H140.4V132C140.4 105 162 99.6 183.6 99.6V78C156.6 78 140.4 94.2 140.4 121.2Z\"/>\n\t\t\t<path d=\"M100.5 57H82.5V98H100.5V57Z\"/>\n\t\t\t<path d=\"M21 36H0V186H21V120H82.5V98H21V57H82.5V36H21Z\"/>\n\t\t</svg>\n\t</a>\n\t\n\t<a href=\"/portfolio\" class=\"item link-basic ml-auto\">Работы</a>\n\t<a href=\"/projects\" class=\"item link-basic\">Проекты</a>\n\t<a href=\"/services\" class=\"item link-basic\">Услуги</a>\n\t<a href=\"/blog\" class=\"item link-basic\">Блог</a>\n\t<a href=\"/contacts\" class=\"item link-basic\">Контакты</a>\n</nav>\n\t<!-- Header -->\n\t<header class=\"section-intro bottom-style\">\n\t\t<p class=\"title\">\n\t\t\tКонтакты\n\t\t</p>\n\t</header>\n\n\t<!-- Contacts -->\n\t<section class=\"min-fullscreen\">\n\t\t<div class=\"row\">\n\t\t\t<div class=\"col-12 pb-6\">\n\t\t\t\t<p class=\"text-fixed-3 color-5 mb-2\">Почта</p>\n\t\t\t\t<a href=\"mailto:proxus.reply@gmail.com\"rel=\"noopener\" class=\"link link-underline\">proxus.reply@gmail.com</a>\n\t\t\t</div>\n\t\t\t<div class=\"col-12 col-md-6 pb-6\">\n\t\t\t\t<p class=\"text-fixed-3 color-5 mb-2\">Мессенджеры</p>\n\n\t\t\t\t<a href=\"https://t.me/ProxymalRu\" target=\"_blank\" rel=\"noopener\" class=\"link link-underline mr-1\">Телеграм</a>\n\t\t\t\t<a href=\"https://api.whatsapp.com/send?phone=79063934544&text=%D0%97%D0%B4%D1%80%D0%B0%D0%B2%D1%81%D1%82%D0%B2%D1%83%D0%B9%D1%82%D0%B5,%20%D1%85%D0%BE%D1%82%D0%B5%D0%BB%D0%BE%D1%81%D1%8C%20%D0%B1%D1%8B%20%D0%BF%D1%80%D0%BE%D0%BA%D0%BE%D0%BD%D1%81%D1%83%D0%BB%D1%8C%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D1%82%D1%8C%D1%81%D1%8F\" target=\"_blank\" rel=\"noopener\" class=\"link link-underline\">Ватсапп</a>\n\t\t\t</div>\n\t\t\t<div class=\"col-12 col-md-6\">\n\t\t\t\t<p class=\"text-fixed-3 color-5 mb-2\">Соц. сети</p>\n\n\t\t\t\t<a href=\"https://instagram.com/proxymal.development\" target=\"_blank\" rel=\"noopener\" class=\"link link-underline mr-1\">Инстаграм</a>\n\t\t\t\t<a href=\"#\" target=\"_blank\" rel=\"noopener\" class=\"link link-underline\">ВКонтакте</a>\n\t\t\t</div>\n\t\t</div>\n\t</section>\n\n\t<!-- Footer -->\n\t<footer light >\n\t<div class=\"row\">\n\t\t<div class=\"col-12 col-md-6\">\n\t\t\t<p class=\"footer-category border-bottom\">\n\t\t\t\tПроекты\n\t\t\t</p>\n\n\t\t\t<div class=\"row\">\n\t\t\t\t<div class=\"col-4 footer-column\">\n\t\t\t\t\t<a href=\"/view/vegtex\" class=\"footer-link\">Vegtex</a>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"col-4 footer-column\">\n\n\t\t\t\t</div>\n\t\t\t\t<div class=\"col-4 footer-column\">\n\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"col-12 col-md-3 footer-column\">\n\t\t\t<p class=\"footer-category border-bottom\">\n\t\t\t\tИнформация\n\t\t\t</p>\n\n\t\t\t<a href=\"/about-us\" class=\"footer-link\">О Нас</a>\n\t\t\t<a href=\"/vacancies\" class=\"footer-link\">Вакансии</a>\n\t\t</div>\n\t\t<div class=\"col-12 col-md-3 footer-column\">\n\t\t\t<p class=\"footer-category border-bottom\">\n\t\t\t\tПоддержка\n\t\t\t</p>\n\n\t\t\t<a href=\"/message\" class=\"footer-link\">Связаться</a>\n\t\t\t<a href=\"/faq\" class=\"footer-link\">Частые вопросы</a>\n\t\t\t<a href=\"/privacy\" class=\"footer-link\">Конфиденциальность</a>\n\t\t</div>\n\t</div>\n\t<div class=\"row pb-3\">\n\t\t<div class=\"col-8\">\n\t\t\t<p class=\"color-5 text-fixed-2\">\n\t\t\t\t© 2022 | Все права защищены.\n\t\t\t</p>\n\t\t</div>\n\t\t<div class=\"col-4 d-flex\">\n\t\t\t<a href=\"https://instagram.com/proxymal.development\"  aria-label=\"Instagram\" target=\"_blank\" rel=\"noopener\" class=\"link-icon ml-auto\">\n\t\t\t\t<i class=\"fa fa-instagram text-fixed-3\"></i>\n\t\t\t</a>\n\t\t\t<a href=\"https://t.me/ProxymalRu\" aria-label=\"Telegram\" target=\"_blank\" rel=\"noopener\" class=\"link-icon ml-1\">\n\t\t\t\t<i class=\"fa fa-telegram text-fixed-3\"></i>\n\t\t\t</a>\n\t\t\t<a href=\"https://github.com/Proxymal\" aria-label=\"Github\" target=\"_blank\" rel=\"noopener\" class=\"link-icon ml-1\">\n\t\t\t\t<i class=\"fa fa-github text-fixed-3\"></i>\n\t\t\t</a>\n\t\t</div>\n\t</div>\n</footer></body>\n</html>"
		}),
	})

	// 2. Got result! Get the JSON object
	const result = await resp.json()

	// 3. Print the result to console
	console.log(result)
})()